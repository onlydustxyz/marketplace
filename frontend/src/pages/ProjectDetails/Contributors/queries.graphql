fragment ContributorsTableFields on User {
  id
  login
  avatarUrl
  htmlUrl
  user {
    userId
  }
  paymentRequests(where: { budget: { projectId: { _eq: $projectId } } }) {
    ...PaymentRequest
  }
}

fragment GithubRepoContributorsFields on ProjectGithubRepos {
  githubRepoId
  githubRepoDetails {
    id
    content {
      id
      contributors {
        ...ContributorsTableFields
      }
    }
  }
}

fragment ProjectContributorsForTable on Projects {
  id
  projectDetails {
    projectId
    name
  }
  githubRepos {
    projectId
    githubRepoId
    ...GithubRepoContributorsFields
  }
  budgets {
    id
    paymentRequests {
      ...PaymentRequest
      githubRecipient {
        ...ContributorsTableFields
      }
    }
  }
}

query GetProjectContributors($projectId: uuid!) {
  projectsByPk(id: $projectId) {
    ...ProjectContributorsForTable
  }
}

query GetProjectContributorsAsLeader($projectId: uuid!, $createdSince: timestamp) {
  projectsByPk(id: $projectId) {
    ...ProjectContributorsForTable
    ...ProjectContributorsByLeader
  }
}

query GetProjectRemainingBudget($projectId: uuid!) {
  projectsByPk(id: $projectId) {
    id
    budgets {
      id
      remainingAmount
    }
  }
}
