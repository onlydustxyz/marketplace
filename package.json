{
    "name": "marketplace",
    "version": "2.0.0",
    "scripts": {
        "frontend:generate": "yarn --cwd ./frontend generate",
        "frontend:dev": "yarn --cwd ./frontend dev",
        "frontend:build": "yarn --cwd ./frontend build",
        "frontend:install": "yarn --cwd ./frontend install",
        "frontend:lint": "yarn --cwd ./frontend lint",
        "frontend:dependency-cruiser": "yarn --cwd ./frontend dependency-cruiser",
        "frontend:test": "yarn --cwd ./frontend test",
        "backend:up": "docker compose -f infra.docker-compose.yml -f backend.docker-compose.yml up -d --wait && yarn hasura:metadata:apply && yarn hasura:metadata:reload",
        "backend:down": "docker compose -f infra.docker-compose.yml -f backend.docker-compose.yml down",
        "backend:api": "cargo run --manifest-path backend/Cargo.toml -p api",
        "backend:event-store": "cargo run --manifest-path backend/Cargo.toml -p event-store",
        "backend:event-listeners": "cargo run --manifest-path backend/Cargo.toml -p event-listeners --bin listeners",
        "backend:github-indexer": "cargo run --manifest-path backend/Cargo.toml -p event-listeners --bin github-indexer",
        "backend:github-indexer-api": "cargo run --manifest-path backend/Cargo.toml -p event-listeners",
        "backend:check": "cargo check --manifest-path backend/Cargo.toml",
        "backend:build": "cargo build --manifest-path backend/Cargo.toml",
        "backend:clippy": "cargo clippy --manifest-path backend/Cargo.toml --bins --tests --examples -- -D warnings",
        "backend:fmt": "cargo +nightly fmt --manifest-path backend/Cargo.toml --all -- --check",
        "backend:unit-tests": "cargo test --manifest-path backend/Cargo.toml --lib",
        "backend:integration-tests": "cargo test --manifest-path backend/Cargo.toml --test '*'",
        "backend:unit-tests-with-coverage": "cargo tarpaulin --manifest-path backend/Cargo.toml --workspace --skip-clean --target-dir tarpaulin_target --lib --out Xml",
        "backend:integration-tests-with-coverage": "cargo tarpaulin --manifest-path backend/Cargo.toml --workspace --skip-clean --target-dir tarpaulin_target --test '*' --out Xml",
        "infra:up": "docker compose -f infra.docker-compose.yml up -d --wait",
        "infra:reset": "docker compose -f infra.docker-compose.yml down -v",
        "hasura:install": "yarn --cwd ./hasura install",
        "hasura:console:start": "yarn --cwd ./hasura start",
        "hasura:metadata:apply": "yarn --cwd ./hasura metadata:apply",
        "hasura:metadata:reload": "yarn --cwd ./hasura metadata:reload",
        "hasura:metadata:drop-inconsistencies": "yarn --cwd ./hasura hasura --skip-update-check md ic drop",
        "hasura:metadata:log-inconsistencies": "yarn --cwd ./hasura hasura hasura md ic list",
        "hasura:metadata:export": "yarn --cwd ./hasura hasura --skip-update-check md export",
        "hasura:metadata:check-consistency": "yarn --cwd ./hasura hasura md ic status",
        "e2e:env:up": "docker compose -f infra.docker-compose.yml -f backend.docker-compose.yml -f frontend.docker-compose.yml up -d --wait && yarn hasura:metadata:apply && yarn hasura:metadata:reload",
        "e2e:env:down": "docker compose -f infra.docker-compose.yml -f backend.docker-compose.yml -f frontend.docker-compose.yml down",
        "e2e:env:reset": "yarn e2e:env:down -v && yarn e2e:populate:clean",
        "e2e:hasura:delete-metadata": "docker compose exec -u postgres db psql marketplace_db -c \"DELETE FROM hdb_catalog.hdb_metadata\"",
        "e2e:populate": "yarn --cwd ./e2e/playwright playwright test __populate",
        "e2e:populate:clean": "rm -f \"./e2e/playwright/marketplace_db_dump\" && rm -rf \"./e2e/playwright/fixtures/__generated\"",
        "e2e:run": "yarn --cwd ./e2e/playwright playwright test",
        "e2e:run:headed": "yarn --cwd ./e2e/playwright playwright test --headed",
        "e2e:install": "yarn --cwd ./e2e/playwright install && yarn --cwd ./e2e/playwright playwright install --with-deps chromium",
        "e2e:update-snapshots": "yarn --cwd ./e2e/playwright playwright test --update-snapshots responsive"
    }
}
